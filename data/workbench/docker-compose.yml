version: "2.2"

services:
  rstudio-workbench-hpc: 
    image: rstudio-workbench-hpc:bionic-2021.09.1-372.pro1
    hostname: rstudio-workbench
    privileged: true 
    volumes:
      - /efs:/efs
      - /scratch:/scratch
      - ./etc/rserver.conf:/etc/rstudio/rserver.conf
      - ./etc/launcher.conf:/etc/rstudio/launcher.conf
      - ./etc/launcher.slurm.conf:/etc/rstudio/launcher.slurm.conf
      - ./etc/launcher.slurm.profiles.conf:/etc/rstudio/launcher.slurm.profiles.conf  
      - ./etc/jupyter.conf:/etc/rstudio/jupyter.conf
      - /opt/slurm/etc:/opt/slurm/etc
      - /etc/passwd:/etc/passwd
      - /etc/group:/etc/group
      - /etc/shadow:/etc/shadow
    ports:
      - "8787:8787"
    environment:
      RSP_LICENSE: ${RSP_LICENSE}
